###############################################################################
# Common
###############################################################################
# 是否后台运行（false=前台，便于日志）
daemonize: false

###############################################################################
# Exporter: pmacctd + nfprobe (sniff NIC -> export IPFIX)
###############################################################################
# 抓包网卡
pcap_interface: eth0

# 只抓 IPv4，过滤掉 IPv6
pcap_filter: ip

# 聚合键（决定CSV字段）
aggregate: src_host, dst_host, src_port, dst_port, proto, tos, tcpflags

# exporter 插件
plugins: nfprobe
# IPFIX 接收端
nfprobe_receiver: 127.0.0.1:9995
# IPFIX 版本
nfprobe_version: 10
# nfprobe 超时参数
nfprobe_timeouts: tcp=30:maxlife=60
# 随机采样
# sampling_rate: 1000

###############################################################################
# Collector: nfacctd + print (listen IPFIX -> print CSV)
###############################################################################
# 监听地址
nfacctd_ip: 0.0.0.0
# 监听端口
nfacctd_port: 9995

# 注意：nfacctd 也会看 plugins/aggregate/print_* 这些项
# 所以如果你希望 collector 和 exporter 的 aggregate 不一样，
# 就需要拆文件；否则用同一个 aggregate 最省事。

# 输出格式
print_output: csv
# 刷新间隔（秒）
print_refresh_time: 10
# 时间戳使用 epoch
timestamps_since_epoch: true
# IP 协议数字开关
print_num_protos: true
# 是否输出近似“起止时间”（增加 timestamp_min/max）
nfacctd_stitching: true

###############################################################################
# Processor 配置
###############################################################################
# FTP 地址
processor_ftp_host: 172.17.0.1
# FTP 端口
processor_ftp_port: 2121
# FTP 用户名
processor_ftp_user: ftpuser
# FTP 密码
processor_ftp_pass: ftppass
# FTP 目录
processor_ftp_dir: 
# FTP 超时（秒）
processor_ftp_timeout: 300

# 轮转时间间隔（秒）
processor_rotate_interval_sec: 60
# 轮转大小（MB）
processor_rotate_size_mb: 100
# 文件名前缀
processor_file_prefix: flows_

# 上传间隔（秒）
processor_upload_interval_sec: 60
# 时区
processor_timezone: Asia/Shanghai
# 每隔N行打印一条CSV数据（0=不打印）
processor_debug_print_interval: 50000
# stdin -> writer 通道容量（行数）
processor_ingest_chan_capacity: 10000
# 通道写入超时（毫秒，0=不丢弃，阻塞等待写入）
processor_ingest_chan_timeout_ms: 100

# 是否启用状态报告
processor_status_report_enabled: false
# 状态报告URL
processor_status_report_url: http://127.0.0.1:8080/api/uploadStatus
# 状态报告间隔（秒）
processor_status_report_interval_sec: 60
# 状态报告UUID
processor_status_report_uuid:
# 状态报告本地文件路径
processor_status_report_file_path:
# 状态报告文件大小上限（MB）
processor_status_report_file_max_mb: 10
# 状态报告保留文件数
processor_status_report_file_backups: 0

# 诊断采集（宿主机日志 + 容器进程资源指标）
processor_diag_enabled: true
# 诊断采集周期（秒）
processor_diag_interval_sec: 60
